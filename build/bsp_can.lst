ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"bsp_can.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.BSP_CAN_Init,"ax",%progbits
  20              		.align	1
  21              		.global	BSP_CAN_Init
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	BSP_CAN_Init:
  27              	.LFB133:
  28              		.file 1 "Core/BSP/interface/bsp_can.c"
   1:Core/BSP/interface/bsp_can.c **** /**
   2:Core/BSP/interface/bsp_can.c ****  ******************************************************************************
   3:Core/BSP/interface/bsp_can.c ****  * Êñá‰ª∂Âêç          : bsp_can.c
   4:Core/BSP/interface/bsp_can.c ****  * ÂàõÂª∫Êó∂Èó¥        : 2021.12.07
   5:Core/BSP/interface/bsp_can.c ****  * ‰ΩúËÄÖ            : ÈôàËøÖ
   6:Core/BSP/interface/bsp_can.c ****  ******************************************************************************
   7:Core/BSP/interface/bsp_can.c ****  * 1.Êú¨‰ª£Á†ÅÂü∫‰∫éSTM32F407IGH6TRÂºÄÂèëÔºåÁºñËØëÁéØÂ¢É‰∏∫vscodeÔºåÂü∫‰∫éFreeRTOSËøõË°åÂºÄÂèë
   8:Core/BSP/interface/bsp_can.c ****  * 2.Êú¨‰ª£Á†ÅÂåÖÂê´Â§ßÈáè‰∏≠ÊñáÊ≥®ÈáäÔºåËØ∑‰ª•UTF-8ÁºñÁ†ÅÊ†ºÂºèÊâìÂºÄ
   9:Core/BSP/interface/bsp_can.c ****  * 3.Êú¨‰ª£Á†ÅÊúÄÁªàËß£ÈáäÊùÉÂΩíÂìàÂ∞îÊª®Â∑•‰∏öÂ§ßÂ≠¶ÔºàÊ∑±Âú≥ÔºâÂçóÂ∑•È™ÅÈπ∞ÊàòÈòüCritical HITÊâÄÊ
  10:Core/BSP/interface/bsp_can.c ****  *
  11:Core/BSP/interface/bsp_can.c ****  * Copyright (c) ÂìàÂ∞îÊª®Â∑•‰∏öÂ§ßÂ≠¶ÔºàÊ∑±Âú≥ÔºâÂçóÂ∑•È™ÅÈπ∞ÊàòÈòüCritical HIT ÁâàÊùÉÊâÄÊúâ
  12:Core/BSP/interface/bsp_can.c ****  ******************************************************************************
  13:Core/BSP/interface/bsp_can.c ****  * ËØ¥ÊòéÔºö
  14:Core/BSP/interface/bsp_can.c ****  ******************************************************************************
  15:Core/BSP/interface/bsp_can.c ****  */
  16:Core/BSP/interface/bsp_can.c **** #include "bsp_can.h"
  17:Core/BSP/interface/bsp_can.c **** #include "bsp_def.h"
  18:Core/BSP/interface/bsp_can.c **** #include "bsp_time.h"
  19:Core/BSP/interface/bsp_can.c **** #include "can.h"
  20:Core/BSP/interface/bsp_can.c **** #include "cvector.h"
  21:Core/BSP/interface/bsp_can.c **** 
  22:Core/BSP/interface/bsp_can.c **** typedef struct BSP_CanTypeDef_t {
  23:Core/BSP/interface/bsp_can.c ****     CAN_HandleTypeDef *device;  //Ëá™ÂÆö‰πâÊÄªÁ∫øÁºñÂè∑
  24:Core/BSP/interface/bsp_can.c ****     uint32_t tx_mailbox;
  25:Core/BSP/interface/bsp_can.c ****     cvector *call_backs;
  26:Core/BSP/interface/bsp_can.c ****     uint32_t bank_prefix;              //‰∏çÂêåcanÂØπÂ∫îÁöÑËøáÊª§Âô®Áõ∏ÂÖ≥ÂèÇÊï∞ÂÄº
  27:Core/BSP/interface/bsp_can.c ****     uint16_t filters[FILTER_MAX_CNT];  //ÊåâÊ†áÂáÜÂ∏ßIDÂÆö‰πâ
  28:Core/BSP/interface/bsp_can.c **** } BSP_CanTypeDef;
  29:Core/BSP/interface/bsp_can.c **** 
  30:Core/BSP/interface/bsp_can.c **** BSP_CanTypeDef can_devices[DEVICE_CAN_CNT];  //ÂÆö‰πâÂØπÂ∫îÊï∞ÈáèÁöÑcanÂ§ñËÆæÔºåÂç≥‰ª£Á†Å‰∏≠ÂÆö‰πâc
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 2


  31:Core/BSP/interface/bsp_can.c **** 
  32:Core/BSP/interface/bsp_can.c **** void BSP_CAN_Init() {
  29              		.loc 1 32 21 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 70B5     		push	{r4, r5, r6, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36              		.cfi_offset 4, -16
  37              		.cfi_offset 5, -12
  38              		.cfi_offset 6, -8
  39              		.cfi_offset 14, -4
  33:Core/BSP/interface/bsp_can.c ****     can_devices[0].device = &hcan1;
  40              		.loc 1 33 5 view .LVU1
  41              		.loc 1 33 27 is_stmt 0 view .LVU2
  42 0002 1D4D     		ldr	r5, .L10
  43 0004 1D4B     		ldr	r3, .L10+4
  44 0006 2B60     		str	r3, [r5]
  34:Core/BSP/interface/bsp_can.c ****     // can_devices[0].fifo = CAN_RX_FIFO0;
  35:Core/BSP/interface/bsp_can.c ****     // can_devices[0].tx_mailbox = (uint32_t *)CAN_TX_MAILBOX0;
  36:Core/BSP/interface/bsp_can.c ****     can_devices[0].bank_prefix = 0;
  45              		.loc 1 36 5 is_stmt 1 view .LVU3
  46              		.loc 1 36 32 is_stmt 0 view .LVU4
  47 0008 0024     		movs	r4, #0
  48 000a EC60     		str	r4, [r5, #12]
  37:Core/BSP/interface/bsp_can.c ****     can_devices[0].call_backs = cvector_create(sizeof(can_rx_callback));  //ÂàõÂª∫Áî®‰∫éÂÇ®Â≠òÂõûË∞
  49              		.loc 1 37 5 is_stmt 1 view .LVU5
  50              		.loc 1 37 33 is_stmt 0 view .LVU6
  51 000c 0420     		movs	r0, #4
  52 000e FFF7FEFF 		bl	cvector_create
  53              	.LVL0:
  54              		.loc 1 37 31 view .LVU7
  55 0012 A860     		str	r0, [r5, #8]
  38:Core/BSP/interface/bsp_can.c **** 
  39:Core/BSP/interface/bsp_can.c ****     can_devices[1].device = &hcan2;
  56              		.loc 1 39 5 is_stmt 1 view .LVU8
  57              		.loc 1 39 27 is_stmt 0 view .LVU9
  58 0014 1A4B     		ldr	r3, .L10+8
  59 0016 C5F88030 		str	r3, [r5, #128]
  40:Core/BSP/interface/bsp_can.c ****     // can_devices[1].fifo = CAN_RX_FIFO1;
  41:Core/BSP/interface/bsp_can.c ****     // can_devices[1].tx_mailbox = (uint32_t *)CAN_TX_MAILBOX1;
  42:Core/BSP/interface/bsp_can.c ****     can_devices[1].bank_prefix = 14;
  60              		.loc 1 42 5 is_stmt 1 view .LVU10
  61              		.loc 1 42 32 is_stmt 0 view .LVU11
  62 001a 0E23     		movs	r3, #14
  63 001c C5F88C30 		str	r3, [r5, #140]
  43:Core/BSP/interface/bsp_can.c ****     can_devices[1].call_backs = cvector_create(sizeof(can_rx_callback));
  64              		.loc 1 43 5 is_stmt 1 view .LVU12
  65              		.loc 1 43 33 is_stmt 0 view .LVU13
  66 0020 0420     		movs	r0, #4
  67 0022 FFF7FEFF 		bl	cvector_create
  68              	.LVL1:
  69              		.loc 1 43 31 view .LVU14
  70 0026 C5F88800 		str	r0, [r5, #136]
  44:Core/BSP/interface/bsp_can.c **** 
  45:Core/BSP/interface/bsp_can.c ****     for (size_t d = 0; d < DEVICE_CAN_CNT; ++d) {
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 3


  71              		.loc 1 45 5 is_stmt 1 view .LVU15
  72              	.LBB2:
  73              		.loc 1 45 10 view .LVU16
  74              	.LVL2:
  75              		.loc 1 45 17 is_stmt 0 view .LVU17
  76 002a A446     		mov	ip, r4
  77              		.loc 1 45 5 view .LVU18
  78 002c 0CE0     		b	.L2
  79              	.LVL3:
  80              	.L3:
  81              	.LBB3:
  46:Core/BSP/interface/bsp_can.c ****         for (size_t i = 0; i < FILTER_MAX_CNT; ++i) {
  47:Core/BSP/interface/bsp_can.c ****             can_devices[d].filters[i] = ID_NOTSET;
  82              		.loc 1 47 13 is_stmt 1 discriminator 3 view .LVU19
  83              		.loc 1 47 39 is_stmt 0 discriminator 3 view .LVU20
  84 002e 03EB8C12 		add	r2, r3, ip, lsl #6
  85 0032 0832     		adds	r2, r2, #8
  86 0034 1049     		ldr	r1, .L10
  87 0036 4FF40060 		mov	r0, #2048
  88 003a 21F81200 		strh	r0, [r1, r2, lsl #1]	@ movhi
  46:Core/BSP/interface/bsp_can.c ****         for (size_t i = 0; i < FILTER_MAX_CNT; ++i) {
  89              		.loc 1 46 48 is_stmt 1 discriminator 3 view .LVU21
  90 003e 0133     		adds	r3, r3, #1
  91              	.LVL4:
  92              	.L4:
  46:Core/BSP/interface/bsp_can.c ****         for (size_t i = 0; i < FILTER_MAX_CNT; ++i) {
  93              		.loc 1 46 28 discriminator 1 view .LVU22
  46:Core/BSP/interface/bsp_can.c ****         for (size_t i = 0; i < FILTER_MAX_CNT; ++i) {
  94              		.loc 1 46 9 is_stmt 0 discriminator 1 view .LVU23
  95 0040 372B     		cmp	r3, #55
  96 0042 F4D9     		bls	.L3
  97              	.LBE3:
  45:Core/BSP/interface/bsp_can.c ****         for (size_t i = 0; i < FILTER_MAX_CNT; ++i) {
  98              		.loc 1 45 44 is_stmt 1 discriminator 2 view .LVU24
  99 0044 0CF1010C 		add	ip, ip, #1
 100              	.LVL5:
 101              	.L2:
  45:Core/BSP/interface/bsp_can.c ****         for (size_t i = 0; i < FILTER_MAX_CNT; ++i) {
 102              		.loc 1 45 24 discriminator 1 view .LVU25
  45:Core/BSP/interface/bsp_can.c ****         for (size_t i = 0; i < FILTER_MAX_CNT; ++i) {
 103              		.loc 1 45 5 is_stmt 0 discriminator 1 view .LVU26
 104 0048 BCF1010F 		cmp	ip, #1
 105 004c 01D8     		bhi	.L9
 106              	.LBB4:
  46:Core/BSP/interface/bsp_can.c ****         for (size_t i = 0; i < FILTER_MAX_CNT; ++i) {
 107              		.loc 1 46 21 view .LVU27
 108 004e 0023     		movs	r3, #0
 109 0050 F6E7     		b	.L4
 110              	.L9:
 111              	.LBE4:
 112              	.LBE2:
 113              	.LBB5:
  48:Core/BSP/interface/bsp_can.c ****         }
  49:Core/BSP/interface/bsp_can.c ****     }
  50:Core/BSP/interface/bsp_can.c **** 
  51:Core/BSP/interface/bsp_can.c ****     for (int i = 0; i < DEVICE_CAN_CNT; ++i) {
 114              		.loc 1 51 14 view .LVU28
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 4


 115 0052 0024     		movs	r4, #0
 116 0054 0DE0     		b	.L5
 117              	.LVL6:
 118              	.L6:
  52:Core/BSP/interface/bsp_can.c ****         HAL_CAN_Start(can_devices[i].device);  //Â∞ÜHALÂ∫ìÁöÑÂØπÂ∫îÂäüËÉΩÂáΩÊï∞Â∞ÅË£ÖÔºåÂÆûÁé∞Êò†Â∞
 119              		.loc 1 52 9 is_stmt 1 discriminator 3 view .LVU29
 120 0056 084E     		ldr	r6, .L10
 121 0058 E501     		lsls	r5, r4, #7
 122 005a 7059     		ldr	r0, [r6, r5]
 123 005c FFF7FEFF 		bl	HAL_CAN_Start
 124              	.LVL7:
  53:Core/BSP/interface/bsp_can.c ****         HAL_CAN_ActivateNotification(can_devices[i].device, CAN_IT_RX_FIFO0_MSG_PENDING);
 125              		.loc 1 53 9 discriminator 3 view .LVU30
 126 0060 0221     		movs	r1, #2
 127 0062 7059     		ldr	r0, [r6, r5]
 128 0064 FFF7FEFF 		bl	HAL_CAN_ActivateNotification
 129              	.LVL8:
  54:Core/BSP/interface/bsp_can.c ****         HAL_CAN_ActivateNotification(can_devices[i].device, CAN_IT_RX_FIFO1_MSG_PENDING);
 130              		.loc 1 54 9 discriminator 3 view .LVU31
 131 0068 1021     		movs	r1, #16
 132 006a 7059     		ldr	r0, [r6, r5]
 133 006c FFF7FEFF 		bl	HAL_CAN_ActivateNotification
 134              	.LVL9:
  51:Core/BSP/interface/bsp_can.c ****         HAL_CAN_Start(can_devices[i].device);  //Â∞ÜHALÂ∫ìÁöÑÂØπÂ∫îÂäüËÉΩÂáΩÊï∞Â∞ÅË£ÖÔºåÂÆûÁé∞Êò†Â∞
 135              		.loc 1 51 41 discriminator 3 view .LVU32
 136 0070 0134     		adds	r4, r4, #1
 137              	.LVL10:
 138              	.L5:
  51:Core/BSP/interface/bsp_can.c ****         HAL_CAN_Start(can_devices[i].device);  //Â∞ÜHALÂ∫ìÁöÑÂØπÂ∫îÂäüËÉΩÂáΩÊï∞Â∞ÅË£ÖÔºåÂÆûÁé∞Êò†Â∞
 139              		.loc 1 51 21 discriminator 1 view .LVU33
  51:Core/BSP/interface/bsp_can.c ****         HAL_CAN_Start(can_devices[i].device);  //Â∞ÜHALÂ∫ìÁöÑÂØπÂ∫îÂäüËÉΩÂáΩÊï∞Â∞ÅË£ÖÔºåÂÆûÁé∞Êò†Â∞
 140              		.loc 1 51 5 is_stmt 0 discriminator 1 view .LVU34
 141 0072 012C     		cmp	r4, #1
 142 0074 EFDD     		ble	.L6
 143              	.LBE5:
  55:Core/BSP/interface/bsp_can.c ****     }
  56:Core/BSP/interface/bsp_can.c **** }
 144              		.loc 1 56 1 view .LVU35
 145 0076 70BD     		pop	{r4, r5, r6, pc}
 146              	.LVL11:
 147              	.L11:
 148              		.loc 1 56 1 view .LVU36
 149              		.align	2
 150              	.L10:
 151 0078 00000000 		.word	.LANCHOR0
 152 007c 00000000 		.word	hcan1
 153 0080 00000000 		.word	hcan2
 154              		.cfi_endproc
 155              	.LFE133:
 157              		.section	.text.BSP_CAN_Send,"ax",%progbits
 158              		.align	1
 159              		.global	BSP_CAN_Send
 160              		.syntax unified
 161              		.thumb
 162              		.thumb_func
 164              	BSP_CAN_Send:
 165              	.LVL12:
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 5


 166              	.LFB134:
  57:Core/BSP/interface/bsp_can.c **** 
  58:Core/BSP/interface/bsp_can.c **** //  ‰ªÖÂØπHALÂ∫ìÁöÑcanÂèëÈÄÅÂáΩÊï∞ËøõË°å‰∫ÜÂΩ¢Âºè‰∏äÁöÑÂ∞ÅË£ÖÔºåÂÆûÈôÖÂèÇÊï∞‰æùÁÑ∂‰æùËµñÂ§ñÈÉ®‰º†Âè
  59:Core/BSP/interface/bsp_can.c **** void BSP_CAN_Send(uint8_t can_id, uint16_t identifier, uint8_t *data,
  60:Core/BSP/interface/bsp_can.c ****                   uint32_t len) {
 167              		.loc 1 60 33 is_stmt 1 view -0
 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 24
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171              		.loc 1 60 33 is_stmt 0 view .LVU38
 172 0000 70B5     		push	{r4, r5, r6, lr}
 173              	.LCFI1:
 174              		.cfi_def_cfa_offset 16
 175              		.cfi_offset 4, -16
 176              		.cfi_offset 5, -12
 177              		.cfi_offset 6, -8
 178              		.cfi_offset 14, -4
 179 0002 86B0     		sub	sp, sp, #24
 180              	.LCFI2:
 181              		.cfi_def_cfa_offset 40
 182 0004 0446     		mov	r4, r0
 183 0006 1646     		mov	r6, r2
  61:Core/BSP/interface/bsp_can.c ****     CAN_TxHeaderTypeDef txconf;
 184              		.loc 1 61 5 is_stmt 1 view .LVU39
  62:Core/BSP/interface/bsp_can.c ****     txconf.StdId = identifier;
 185              		.loc 1 62 5 view .LVU40
 186              		.loc 1 62 18 is_stmt 0 view .LVU41
 187 0008 0091     		str	r1, [sp]
  63:Core/BSP/interface/bsp_can.c ****     txconf.IDE = CAN_ID_STD;
 188              		.loc 1 63 5 is_stmt 1 view .LVU42
 189              		.loc 1 63 16 is_stmt 0 view .LVU43
 190 000a 0022     		movs	r2, #0
 191              	.LVL13:
 192              		.loc 1 63 16 view .LVU44
 193 000c 0292     		str	r2, [sp, #8]
  64:Core/BSP/interface/bsp_can.c ****     txconf.RTR = CAN_RTR_DATA;
 194              		.loc 1 64 5 is_stmt 1 view .LVU45
 195              		.loc 1 64 16 is_stmt 0 view .LVU46
 196 000e 0392     		str	r2, [sp, #12]
  65:Core/BSP/interface/bsp_can.c ****     txconf.DLC = len;
 197              		.loc 1 65 5 is_stmt 1 view .LVU47
 198              		.loc 1 65 16 is_stmt 0 view .LVU48
 199 0010 0493     		str	r3, [sp, #16]
  66:Core/BSP/interface/bsp_can.c ****     uint32_t can_tx_start_time = BSP_sys_time_ms();
 200              		.loc 1 66 5 is_stmt 1 view .LVU49
 201              		.loc 1 66 34 is_stmt 0 view .LVU50
 202 0012 FFF7FEFF 		bl	BSP_sys_time_ms
 203              	.LVL14:
 204              		.loc 1 66 34 view .LVU51
 205 0016 0546     		mov	r5, r0
 206              	.LVL15:
  67:Core/BSP/interface/bsp_can.c ****     while (HAL_CAN_GetTxMailboxesFreeLevel(can_devices[can_id].device) == 0){
 207              		.loc 1 67 5 is_stmt 1 view .LVU52
 208              	.L13:
 209              		.loc 1 67 11 view .LVU53
 210              		.loc 1 67 12 is_stmt 0 view .LVU54
 211 0018 E301     		lsls	r3, r4, #7
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 6


 212 001a 0E49     		ldr	r1, .L17
 213 001c C858     		ldr	r0, [r1, r3]
 214 001e FFF7FEFF 		bl	HAL_CAN_GetTxMailboxesFreeLevel
 215              	.LVL16:
 216              		.loc 1 67 11 view .LVU55
 217 0022 58B9     		cbnz	r0, .L14
 218              	.LBB6:
  68:Core/BSP/interface/bsp_can.c ****         // HAL_CAN_AbortTxRequest
  69:Core/BSP/interface/bsp_can.c ****         uint32_t can_tx_now_time = BSP_sys_time_ms();
 219              		.loc 1 69 9 is_stmt 1 view .LVU56
 220              		.loc 1 69 36 is_stmt 0 view .LVU57
 221 0024 FFF7FEFF 		bl	BSP_sys_time_ms
 222              	.LVL17:
  70:Core/BSP/interface/bsp_can.c ****         // 2msËøòÊ≤°ÊúâÂèëÈÄÅÂá∫ÂéªÔºåÊîæÂºÉÂèëÈÄÅ
  71:Core/BSP/interface/bsp_can.c ****         if(can_tx_now_time > can_tx_start_time + 2){
 223              		.loc 1 71 9 is_stmt 1 view .LVU58
 224              		.loc 1 71 48 is_stmt 0 view .LVU59
 225 0028 AB1C     		adds	r3, r5, #2
 226              		.loc 1 71 11 view .LVU60
 227 002a 8342     		cmp	r3, r0
 228 002c F4D2     		bcs	.L13
  72:Core/BSP/interface/bsp_can.c ****             HAL_CAN_AbortTxRequest(can_devices[can_id].device,CAN_TX_MAILBOX0 | CAN_TX_MAILBOX1 | C
 229              		.loc 1 72 13 is_stmt 1 view .LVU61
 230 002e E301     		lsls	r3, r4, #7
 231 0030 0721     		movs	r1, #7
 232 0032 084A     		ldr	r2, .L17
 233 0034 D058     		ldr	r0, [r2, r3]
 234              	.LVL18:
 235              		.loc 1 72 13 is_stmt 0 view .LVU62
 236 0036 FFF7FEFF 		bl	HAL_CAN_AbortTxRequest
 237              	.LVL19:
  73:Core/BSP/interface/bsp_can.c ****             __NOP();
 238              		.loc 1 73 13 is_stmt 1 view .LVU63
 239              		.syntax unified
 240              	@ 73 "Core/BSP/interface/bsp_can.c" 1
 241 003a 00BF     		nop
 242              	@ 0 "" 2
  74:Core/BSP/interface/bsp_can.c ****             break;
 243              		.loc 1 74 13 view .LVU64
 244              		.thumb
 245              		.syntax unified
 246              	.L14:
 247              		.loc 1 74 13 is_stmt 0 view .LVU65
 248              	.LBE6:
  75:Core/BSP/interface/bsp_can.c ****         }
  76:Core/BSP/interface/bsp_can.c ****     }
  77:Core/BSP/interface/bsp_can.c ****     HAL_CAN_AddTxMessage(can_devices[can_id].device, &txconf, data,
 249              		.loc 1 77 5 is_stmt 1 view .LVU66
 250 003c 0548     		ldr	r0, .L17
 251 003e E501     		lsls	r5, r4, #7
 252              	.LVL20:
 253              		.loc 1 77 5 is_stmt 0 view .LVU67
 254 0040 00EBC413 		add	r3, r0, r4, lsl #7
 255 0044 0433     		adds	r3, r3, #4
 256 0046 3246     		mov	r2, r6
 257 0048 6946     		mov	r1, sp
 258 004a 4059     		ldr	r0, [r0, r5]
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 7


 259 004c FFF7FEFF 		bl	HAL_CAN_AddTxMessage
 260              	.LVL21:
  78:Core/BSP/interface/bsp_can.c ****                          &can_devices[can_id].tx_mailbox);
  79:Core/BSP/interface/bsp_can.c **** }
 261              		.loc 1 79 1 view .LVU68
 262 0050 06B0     		add	sp, sp, #24
 263              	.LCFI3:
 264              		.cfi_def_cfa_offset 16
 265              		@ sp needed
 266 0052 70BD     		pop	{r4, r5, r6, pc}
 267              	.LVL22:
 268              	.L18:
 269              		.loc 1 79 1 view .LVU69
 270              		.align	2
 271              	.L17:
 272 0054 00000000 		.word	.LANCHOR0
 273              		.cfi_endproc
 274              	.LFE134:
 276              		.section	.text.update_filter,"ax",%progbits
 277              		.align	1
 278              		.global	update_filter
 279              		.syntax unified
 280              		.thumb
 281              		.thumb_func
 283              	update_filter:
 284              	.LVL23:
 285              	.LFB135:
  80:Core/BSP/interface/bsp_can.c **** 
  81:Core/BSP/interface/bsp_can.c **** void update_filter(uint8_t can_id, uint32_t filter_index) {
 286              		.loc 1 81 59 is_stmt 1 view -0
 287              		.cfi_startproc
 288              		@ args = 0, pretend = 0, frame = 40
 289              		@ frame_needed = 0, uses_anonymous_args = 0
 290              		.loc 1 81 59 is_stmt 0 view .LVU71
 291 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 292              	.LCFI4:
 293              		.cfi_def_cfa_offset 20
 294              		.cfi_offset 4, -20
 295              		.cfi_offset 5, -16
 296              		.cfi_offset 6, -12
 297              		.cfi_offset 7, -8
 298              		.cfi_offset 14, -4
 299 0002 8BB0     		sub	sp, sp, #44
 300              	.LCFI5:
 301              		.cfi_def_cfa_offset 64
  82:Core/BSP/interface/bsp_can.c ****     uint32_t group_index = filter_index / 4;
 302              		.loc 1 82 5 is_stmt 1 view .LVU72
 303              		.loc 1 82 14 is_stmt 0 view .LVU73
 304 0004 4FEA910E 		lsr	lr, r1, #2
 305              	.LVL24:
  83:Core/BSP/interface/bsp_can.c ****     CAN_FilterTypeDef tmp;
 306              		.loc 1 83 5 is_stmt 1 view .LVU74
  84:Core/BSP/interface/bsp_can.c ****     tmp.FilterMode = CAN_FILTERMODE_IDLIST;
 307              		.loc 1 84 5 view .LVU75
 308              		.loc 1 84 20 is_stmt 0 view .LVU76
 309 0008 0124     		movs	r4, #1
 310 000a 0694     		str	r4, [sp, #24]
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 8


  85:Core/BSP/interface/bsp_can.c ****     tmp.FilterScale = CAN_FILTERSCALE_16BIT;
 311              		.loc 1 85 5 is_stmt 1 view .LVU77
 312              		.loc 1 85 21 is_stmt 0 view .LVU78
 313 000c 0023     		movs	r3, #0
 314 000e 0793     		str	r3, [sp, #28]
  86:Core/BSP/interface/bsp_can.c ****     // tmp.FilterFIFOAssignment = can_devices[can_id].fifo;
  87:Core/BSP/interface/bsp_can.c ****     tmp.FilterFIFOAssignment = (group_index & 1) ? CAN_RX_FIFO0 : CAN_RX_FIFO1;  // 4‰∏™‰∏ÄÁªÑÔºåÊå
 315              		.loc 1 87 5 is_stmt 1 view .LVU79
 316              		.loc 1 87 65 is_stmt 0 view .LVU80
 317 0010 11F0040F 		tst	r1, #4
 318 0014 0CBF     		ite	eq
 319 0016 2246     		moveq	r2, r4
 320 0018 1A46     		movne	r2, r3
 321              		.loc 1 87 30 view .LVU81
 322 001a 0492     		str	r2, [sp, #16]
  88:Core/BSP/interface/bsp_can.c ****     tmp.SlaveStartFilterBank = 14;
 323              		.loc 1 88 5 is_stmt 1 view .LVU82
 324              		.loc 1 88 30 is_stmt 0 view .LVU83
 325 001c 0E22     		movs	r2, #14
 326 001e 0992     		str	r2, [sp, #36]
  89:Core/BSP/interface/bsp_can.c ****     uint16_t *filter_data = can_devices[can_id].filters;
 327              		.loc 1 89 5 is_stmt 1 view .LVU84
 328              		.loc 1 89 15 is_stmt 0 view .LVU85
 329 0020 194A     		ldr	r2, .L28
 330 0022 C701     		lsls	r7, r0, #7
 331 0024 07F1100C 		add	ip, r7, #16
 332 0028 9444     		add	ip, ip, r2
 333              	.LVL25:
  90:Core/BSP/interface/bsp_can.c ****     tmp.FilterIdLow = filter_data[group_index * 4] << 5;
 334              		.loc 1 90 5 is_stmt 1 view .LVU86
 335              		.loc 1 90 34 is_stmt 0 view .LVU87
 336 002a 3CF83E50 		ldrh	r5, [ip, lr, lsl #3]
 337              		.loc 1 90 52 view .LVU88
 338 002e 6D01     		lsls	r5, r5, #5
 339              		.loc 1 90 21 view .LVU89
 340 0030 0195     		str	r5, [sp, #4]
  91:Core/BSP/interface/bsp_can.c ****     tmp.FilterIdHigh = filter_data[group_index * 4 + 1] << 5;
 341              		.loc 1 91 5 is_stmt 1 view .LVU90
 342              		.loc 1 91 35 is_stmt 0 view .LVU91
 343 0032 0CEBCE05 		add	r5, ip, lr, lsl #3
 344 0036 6E88     		ldrh	r6, [r5, #2]
 345              		.loc 1 91 57 view .LVU92
 346 0038 7601     		lsls	r6, r6, #5
 347              		.loc 1 91 22 view .LVU93
 348 003a 0096     		str	r6, [sp]
  92:Core/BSP/interface/bsp_can.c ****     tmp.FilterMaskIdLow = filter_data[group_index * 4 + 2] << 5;
 349              		.loc 1 92 5 is_stmt 1 view .LVU94
 350              		.loc 1 92 38 is_stmt 0 view .LVU95
 351 003c AE88     		ldrh	r6, [r5, #4]
 352              		.loc 1 92 60 view .LVU96
 353 003e 7601     		lsls	r6, r6, #5
 354              		.loc 1 92 25 view .LVU97
 355 0040 0396     		str	r6, [sp, #12]
  93:Core/BSP/interface/bsp_can.c ****     tmp.FilterMaskIdHigh = filter_data[group_index * 4 + 3] << 5;
 356              		.loc 1 93 5 is_stmt 1 view .LVU98
 357              		.loc 1 93 39 is_stmt 0 view .LVU99
 358 0042 ED88     		ldrh	r5, [r5, #6]
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 9


 359              		.loc 1 93 61 view .LVU100
 360 0044 6D01     		lsls	r5, r5, #5
 361              		.loc 1 93 26 view .LVU101
 362 0046 0295     		str	r5, [sp, #8]
  94:Core/BSP/interface/bsp_can.c ****     tmp.FilterBank = group_index + can_devices[can_id].bank_prefix;
 363              		.loc 1 94 5 is_stmt 1 view .LVU102
 364              		.loc 1 94 55 is_stmt 0 view .LVU103
 365 0048 3A44     		add	r2, r2, r7
 366 004a D268     		ldr	r2, [r2, #12]
 367              		.loc 1 94 34 view .LVU104
 368 004c 7244     		add	r2, r2, lr
 369              		.loc 1 94 20 view .LVU105
 370 004e 0592     		str	r2, [sp, #20]
  95:Core/BSP/interface/bsp_can.c ****     uint8_t id_all_notset = 1;
 371              		.loc 1 95 5 is_stmt 1 view .LVU106
 372              	.LVL26:
  96:Core/BSP/interface/bsp_can.c ****     for (size_t i = 0; i < 4; ++i) {
 373              		.loc 1 96 5 view .LVU107
 374              	.LBB7:
 375              		.loc 1 96 10 view .LVU108
 376              		.loc 1 96 5 is_stmt 0 view .LVU109
 377 0050 00E0     		b	.L20
 378              	.LVL27:
 379              	.L21:
 380              		.loc 1 96 31 is_stmt 1 discriminator 2 view .LVU110
 381 0052 0133     		adds	r3, r3, #1
 382              	.LVL28:
 383              	.L20:
 384              		.loc 1 96 24 discriminator 1 view .LVU111
 385              		.loc 1 96 5 is_stmt 0 discriminator 1 view .LVU112
 386 0054 032B     		cmp	r3, #3
 387 0056 09D8     		bhi	.L27
  97:Core/BSP/interface/bsp_can.c ****         if (filter_data[group_index * 4 + i] != ID_NOTSET) id_all_notset = 0;
 388              		.loc 1 97 9 is_stmt 1 view .LVU113
 389              		.loc 1 97 37 is_stmt 0 view .LVU114
 390 0058 21F00302 		bic	r2, r1, #3
 391              		.loc 1 97 41 view .LVU115
 392 005c 1A44     		add	r2, r2, r3
 393              		.loc 1 97 24 view .LVU116
 394 005e 3CF81220 		ldrh	r2, [ip, r2, lsl #1]
 395              		.loc 1 97 12 view .LVU117
 396 0062 B2F5006F 		cmp	r2, #2048
 397 0066 F4D0     		beq	.L21
 398              		.loc 1 97 74 view .LVU118
 399 0068 0024     		movs	r4, #0
 400              	.LVL29:
 401              		.loc 1 97 74 view .LVU119
 402 006a F2E7     		b	.L21
 403              	.LVL30:
 404              	.L27:
 405              		.loc 1 97 74 view .LVU120
 406              	.LBE7:
  98:Core/BSP/interface/bsp_can.c ****     }
  99:Core/BSP/interface/bsp_can.c ****     if (id_all_notset)
 407              		.loc 1 99 5 is_stmt 1 view .LVU121
 408              		.loc 1 99 8 is_stmt 0 view .LVU122
 409 006c 4CB1     		cbz	r4, .L23
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 10


 100:Core/BSP/interface/bsp_can.c ****         tmp.FilterActivation = CAN_FILTER_DISABLE;
 410              		.loc 1 100 9 is_stmt 1 view .LVU123
 411              		.loc 1 100 30 is_stmt 0 view .LVU124
 412 006e 0023     		movs	r3, #0
 413              	.LVL31:
 414              		.loc 1 100 30 view .LVU125
 415 0070 0893     		str	r3, [sp, #32]
 416              	.L24:
 101:Core/BSP/interface/bsp_can.c ****     else
 102:Core/BSP/interface/bsp_can.c ****         tmp.FilterActivation = CAN_FILTER_ENABLE;
 103:Core/BSP/interface/bsp_can.c ****     HAL_CAN_ConfigFilter(can_devices[can_id].device, &tmp);
 417              		.loc 1 103 5 is_stmt 1 view .LVU126
 418 0072 C001     		lsls	r0, r0, #7
 419              	.LVL32:
 420              		.loc 1 103 5 is_stmt 0 view .LVU127
 421 0074 6946     		mov	r1, sp
 422              	.LVL33:
 423              		.loc 1 103 5 view .LVU128
 424 0076 044B     		ldr	r3, .L28
 425 0078 1858     		ldr	r0, [r3, r0]
 426 007a FFF7FEFF 		bl	HAL_CAN_ConfigFilter
 427              	.LVL34:
 104:Core/BSP/interface/bsp_can.c **** }
 428              		.loc 1 104 1 view .LVU129
 429 007e 0BB0     		add	sp, sp, #44
 430              	.LCFI6:
 431              		.cfi_remember_state
 432              		.cfi_def_cfa_offset 20
 433              		@ sp needed
 434 0080 F0BD     		pop	{r4, r5, r6, r7, pc}
 435              	.LVL35:
 436              	.L23:
 437              	.LCFI7:
 438              		.cfi_restore_state
 102:Core/BSP/interface/bsp_can.c ****     HAL_CAN_ConfigFilter(can_devices[can_id].device, &tmp);
 439              		.loc 1 102 9 is_stmt 1 view .LVU130
 102:Core/BSP/interface/bsp_can.c ****     HAL_CAN_ConfigFilter(can_devices[can_id].device, &tmp);
 440              		.loc 1 102 30 is_stmt 0 view .LVU131
 441 0082 0123     		movs	r3, #1
 442              	.LVL36:
 102:Core/BSP/interface/bsp_can.c ****     HAL_CAN_ConfigFilter(can_devices[can_id].device, &tmp);
 443              		.loc 1 102 30 view .LVU132
 444 0084 0893     		str	r3, [sp, #32]
 445 0086 F4E7     		b	.L24
 446              	.L29:
 447              		.align	2
 448              	.L28:
 449 0088 00000000 		.word	.LANCHOR0
 450              		.cfi_endproc
 451              	.LFE135:
 453              		.section	.text.BSP_CAN_AddFilter,"ax",%progbits
 454              		.align	1
 455              		.global	BSP_CAN_AddFilter
 456              		.syntax unified
 457              		.thumb
 458              		.thumb_func
 460              	BSP_CAN_AddFilter:
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 11


 461              	.LVL37:
 462              	.LFB136:
 105:Core/BSP/interface/bsp_can.c **** 
 106:Core/BSP/interface/bsp_can.c **** void BSP_CAN_AddFilter(uint8_t can_id, uint16_t filter) {
 463              		.loc 1 106 57 is_stmt 1 view -0
 464              		.cfi_startproc
 465              		@ args = 0, pretend = 0, frame = 0
 466              		@ frame_needed = 0, uses_anonymous_args = 0
 467              		.loc 1 106 57 is_stmt 0 view .LVU134
 468 0000 8C46     		mov	ip, r1
 107:Core/BSP/interface/bsp_can.c ****     // uint32_t filter_index = can_devices[can_id].filter_cnt++;
 108:Core/BSP/interface/bsp_can.c ****     for (size_t filter_index = 0; filter_index < FILTER_MAX_CNT;
 469              		.loc 1 108 5 is_stmt 1 view .LVU135
 470              	.LBB8:
 471              		.loc 1 108 10 view .LVU136
 472              	.LVL38:
 473              		.loc 1 108 17 is_stmt 0 view .LVU137
 474 0002 0021     		movs	r1, #0
 475              	.LVL39:
 476              		.loc 1 108 35 is_stmt 1 view .LVU138
 477              		.loc 1 108 5 is_stmt 0 view .LVU139
 478 0004 3729     		cmp	r1, #55
 479 0006 15D8     		bhi	.L39
 480              	.LBE8:
 106:Core/BSP/interface/bsp_can.c ****     // uint32_t filter_index = can_devices[can_id].filter_cnt++;
 481              		.loc 1 106 57 view .LVU140
 482 0008 08B5     		push	{r3, lr}
 483              	.LCFI8:
 484              		.cfi_def_cfa_offset 8
 485              		.cfi_offset 3, -8
 486              		.cfi_offset 14, -4
 487              	.L34:
 488              	.LBB9:
 109:Core/BSP/interface/bsp_can.c ****          ++filter_index) {
 110:Core/BSP/interface/bsp_can.c ****         if (can_devices[can_id].filters[filter_index] == ID_NOTSET) {
 489              		.loc 1 110 9 is_stmt 1 view .LVU141
 490              		.loc 1 110 40 is_stmt 0 view .LVU142
 491 000a 01EB8013 		add	r3, r1, r0, lsl #6
 492 000e 0833     		adds	r3, r3, #8
 493 0010 094A     		ldr	r2, .L41
 494 0012 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 495              		.loc 1 110 12 view .LVU143
 496 0016 B3F5006F 		cmp	r3, #2048
 497 001a 03D0     		beq	.L40
 109:Core/BSP/interface/bsp_can.c ****          ++filter_index) {
 498              		.loc 1 109 10 is_stmt 1 view .LVU144
 499 001c 0131     		adds	r1, r1, #1
 500              	.LVL40:
 108:Core/BSP/interface/bsp_can.c ****          ++filter_index) {
 501              		.loc 1 108 35 view .LVU145
 108:Core/BSP/interface/bsp_can.c ****          ++filter_index) {
 502              		.loc 1 108 5 is_stmt 0 view .LVU146
 503 001e 3729     		cmp	r1, #55
 504 0020 F3D9     		bls	.L34
 505 0022 06E0     		b	.L30
 506              	.L40:
 111:Core/BSP/interface/bsp_can.c ****             can_devices[can_id].filters[filter_index] = filter;
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 12


 507              		.loc 1 111 13 is_stmt 1 view .LVU147
 508              		.loc 1 111 55 is_stmt 0 view .LVU148
 509 0024 01EB8013 		add	r3, r1, r0, lsl #6
 510 0028 0833     		adds	r3, r3, #8
 511 002a 22F813C0 		strh	ip, [r2, r3, lsl #1]	@ movhi
 112:Core/BSP/interface/bsp_can.c ****             update_filter(can_id, filter_index);
 512              		.loc 1 112 13 is_stmt 1 view .LVU149
 513 002e FFF7FEFF 		bl	update_filter
 514              	.LVL41:
 113:Core/BSP/interface/bsp_can.c ****             return;
 515              		.loc 1 113 13 view .LVU150
 516              	.L30:
 517              		.loc 1 113 13 is_stmt 0 view .LVU151
 518              	.LBE9:
 114:Core/BSP/interface/bsp_can.c ****         }
 115:Core/BSP/interface/bsp_can.c ****     }
 116:Core/BSP/interface/bsp_can.c **** }
 519              		.loc 1 116 1 view .LVU152
 520 0032 08BD     		pop	{r3, pc}
 521              	.LVL42:
 522              	.L39:
 523              	.LCFI9:
 524              		.cfi_def_cfa_offset 0
 525              		.cfi_restore 3
 526              		.cfi_restore 14
 527              		.loc 1 116 1 view .LVU153
 528 0034 7047     		bx	lr
 529              	.L42:
 530 0036 00BF     		.align	2
 531              	.L41:
 532 0038 00000000 		.word	.LANCHOR0
 533              		.cfi_endproc
 534              	.LFE136:
 536              		.section	.text.BSP_CAN_RemoveFilter,"ax",%progbits
 537              		.align	1
 538              		.global	BSP_CAN_RemoveFilter
 539              		.syntax unified
 540              		.thumb
 541              		.thumb_func
 543              	BSP_CAN_RemoveFilter:
 544              	.LVL43:
 545              	.LFB137:
 117:Core/BSP/interface/bsp_can.c **** 
 118:Core/BSP/interface/bsp_can.c **** void BSP_CAN_RemoveFilter(uint8_t can_id, uint16_t filter) {
 546              		.loc 1 118 60 is_stmt 1 view -0
 547              		.cfi_startproc
 548              		@ args = 0, pretend = 0, frame = 0
 549              		@ frame_needed = 0, uses_anonymous_args = 0
 550              		.loc 1 118 60 is_stmt 0 view .LVU155
 551 0000 70B5     		push	{r4, r5, r6, lr}
 552              	.LCFI10:
 553              		.cfi_def_cfa_offset 16
 554              		.cfi_offset 4, -16
 555              		.cfi_offset 5, -12
 556              		.cfi_offset 6, -8
 557              		.cfi_offset 14, -4
 558 0002 0546     		mov	r5, r0
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 13


 559 0004 0E46     		mov	r6, r1
 119:Core/BSP/interface/bsp_can.c ****     // uint32_t filter_index = can_devices[can_id].filter_cnt++;
 120:Core/BSP/interface/bsp_can.c ****     for (size_t filter_index = 0; filter_index < FILTER_MAX_CNT;
 560              		.loc 1 120 5 is_stmt 1 view .LVU156
 561              	.LBB10:
 562              		.loc 1 120 10 view .LVU157
 563              	.LVL44:
 564              		.loc 1 120 17 is_stmt 0 view .LVU158
 565 0006 0024     		movs	r4, #0
 566              		.loc 1 120 5 view .LVU159
 567 0008 00E0     		b	.L44
 568              	.LVL45:
 569              	.L45:
 121:Core/BSP/interface/bsp_can.c ****          ++filter_index) {
 570              		.loc 1 121 10 is_stmt 1 view .LVU160
 571 000a 0134     		adds	r4, r4, #1
 572              	.LVL46:
 573              	.L44:
 120:Core/BSP/interface/bsp_can.c ****          ++filter_index) {
 574              		.loc 1 120 35 discriminator 1 view .LVU161
 120:Core/BSP/interface/bsp_can.c ****          ++filter_index) {
 575              		.loc 1 120 5 is_stmt 0 discriminator 1 view .LVU162
 576 000c 372C     		cmp	r4, #55
 577 000e 13D8     		bhi	.L48
 122:Core/BSP/interface/bsp_can.c ****         if (can_devices[can_id].filters[filter_index] == filter) {
 578              		.loc 1 122 9 is_stmt 1 view .LVU163
 579              		.loc 1 122 40 is_stmt 0 view .LVU164
 580 0010 04EB8513 		add	r3, r4, r5, lsl #6
 581 0014 0833     		adds	r3, r3, #8
 582 0016 094A     		ldr	r2, .L49
 583 0018 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 584              		.loc 1 122 12 view .LVU165
 585 001c B342     		cmp	r3, r6
 586 001e F4D1     		bne	.L45
 123:Core/BSP/interface/bsp_can.c ****             can_devices[can_id].filters[filter_index] = ID_NOTSET;
 587              		.loc 1 123 13 is_stmt 1 view .LVU166
 588              		.loc 1 123 55 is_stmt 0 view .LVU167
 589 0020 04EB8513 		add	r3, r4, r5, lsl #6
 590 0024 0833     		adds	r3, r3, #8
 591 0026 4FF40061 		mov	r1, #2048
 592 002a 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 124:Core/BSP/interface/bsp_can.c ****             update_filter(can_id, filter_index);
 593              		.loc 1 124 13 is_stmt 1 view .LVU168
 594 002e 2146     		mov	r1, r4
 595 0030 2846     		mov	r0, r5
 596 0032 FFF7FEFF 		bl	update_filter
 597              	.LVL47:
 598 0036 E8E7     		b	.L45
 599              	.L48:
 600              	.LBE10:
 125:Core/BSP/interface/bsp_can.c ****         }
 126:Core/BSP/interface/bsp_can.c ****     }
 127:Core/BSP/interface/bsp_can.c **** }
 601              		.loc 1 127 1 is_stmt 0 view .LVU169
 602 0038 70BD     		pop	{r4, r5, r6, pc}
 603              	.LVL48:
 604              	.L50:
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 14


 605              		.loc 1 127 1 view .LVU170
 606 003a 00BF     		.align	2
 607              	.L49:
 608 003c 00000000 		.word	.LANCHOR0
 609              		.cfi_endproc
 610              	.LFE137:
 612              		.section	.text.BSP_CAN_RegisterRxCallback,"ax",%progbits
 613              		.align	1
 614              		.global	BSP_CAN_RegisterRxCallback
 615              		.syntax unified
 616              		.thumb
 617              		.thumb_func
 619              	BSP_CAN_RegisterRxCallback:
 620              	.LVL49:
 621              	.LFB138:
 128:Core/BSP/interface/bsp_can.c **** 
 129:Core/BSP/interface/bsp_can.c **** // Ê≥®ÂÜåÂõûË∞ÉÂáΩÊï∞
 130:Core/BSP/interface/bsp_can.c **** void BSP_CAN_RegisterRxCallback(uint8_t can_id, can_rx_callback func) {
 622              		.loc 1 130 71 is_stmt 1 view -0
 623              		.cfi_startproc
 624              		@ args = 0, pretend = 0, frame = 8
 625              		@ frame_needed = 0, uses_anonymous_args = 0
 626              		.loc 1 130 71 is_stmt 0 view .LVU172
 627 0000 00B5     		push	{lr}
 628              	.LCFI11:
 629              		.cfi_def_cfa_offset 4
 630              		.cfi_offset 14, -4
 631 0002 83B0     		sub	sp, sp, #12
 632              	.LCFI12:
 633              		.cfi_def_cfa_offset 16
 634 0004 0191     		str	r1, [sp, #4]
 131:Core/BSP/interface/bsp_can.c ****     cvector_pushback(can_devices[can_id].call_backs, &func);
 635              		.loc 1 131 5 is_stmt 1 view .LVU173
 636 0006 054B     		ldr	r3, .L53
 637 0008 03EBC010 		add	r0, r3, r0, lsl #7
 638              	.LVL50:
 639              		.loc 1 131 5 is_stmt 0 view .LVU174
 640 000c 01A9     		add	r1, sp, #4
 641              	.LVL51:
 642              		.loc 1 131 5 view .LVU175
 643 000e 8068     		ldr	r0, [r0, #8]
 644 0010 FFF7FEFF 		bl	cvector_pushback
 645              	.LVL52:
 132:Core/BSP/interface/bsp_can.c **** }
 646              		.loc 1 132 1 view .LVU176
 647 0014 03B0     		add	sp, sp, #12
 648              	.LCFI13:
 649              		.cfi_def_cfa_offset 4
 650              		@ sp needed
 651 0016 5DF804FB 		ldr	pc, [sp], #4
 652              	.L54:
 653 001a 00BF     		.align	2
 654              	.L53:
 655 001c 00000000 		.word	.LANCHOR0
 656              		.cfi_endproc
 657              	.LFE138:
 659              		.section	.text.BSP_CAN_FifoMsg_Callback,"ax",%progbits
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 15


 660              		.align	1
 661              		.global	BSP_CAN_FifoMsg_Callback
 662              		.syntax unified
 663              		.thumb
 664              		.thumb_func
 666              	BSP_CAN_FifoMsg_Callback:
 667              	.LVL53:
 668              	.LFB139:
 133:Core/BSP/interface/bsp_can.c **** 
 134:Core/BSP/interface/bsp_can.c **** void BSP_CAN_FifoMsg_Callback(CAN_HandleTypeDef *hcan, uint32_t fifo) {
 669              		.loc 1 134 71 is_stmt 1 view -0
 670              		.cfi_startproc
 671              		@ args = 0, pretend = 0, frame = 40
 672              		@ frame_needed = 0, uses_anonymous_args = 0
 673              		.loc 1 134 71 is_stmt 0 view .LVU178
 674 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 675              	.LCFI14:
 676              		.cfi_def_cfa_offset 24
 677              		.cfi_offset 4, -24
 678              		.cfi_offset 5, -20
 679              		.cfi_offset 6, -16
 680              		.cfi_offset 7, -12
 681              		.cfi_offset 8, -8
 682              		.cfi_offset 14, -4
 683 0004 8AB0     		sub	sp, sp, #40
 684              	.LCFI15:
 685              		.cfi_def_cfa_offset 64
 686 0006 0546     		mov	r5, r0
 687 0008 8846     		mov	r8, r1
 135:Core/BSP/interface/bsp_can.c ****     for (int i = 0; i < DEVICE_CAN_CNT; ++i) {
 688              		.loc 1 135 5 is_stmt 1 view .LVU179
 689              	.LBB11:
 690              		.loc 1 135 10 view .LVU180
 691              	.LVL54:
 692              		.loc 1 135 14 is_stmt 0 view .LVU181
 693 000a 0024     		movs	r4, #0
 694              		.loc 1 135 5 view .LVU182
 695 000c 11E0     		b	.L56
 696              	.LVL55:
 697              	.L59:
 698              	.LBB12:
 699              	.LBB13:
 700              	.LBB14:
 136:Core/BSP/interface/bsp_can.c ****         if (hcan == can_devices[i].device) {
 137:Core/BSP/interface/bsp_can.c ****             uint8_t bsp_can_rxbuf[8];
 138:Core/BSP/interface/bsp_can.c ****             CAN_RxHeaderTypeDef rxconf;
 139:Core/BSP/interface/bsp_can.c ****             HAL_CAN_GetRxMessage(hcan, fifo, &rxconf, bsp_can_rxbuf);
 140:Core/BSP/interface/bsp_can.c ****             for (size_t j = 0; j < can_devices[i].call_backs->cv_len; ++j) {
 141:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 701              		.loc 1 141 17 is_stmt 1 discriminator 3 view .LVU183
 702              		.loc 1 141 63 is_stmt 0 discriminator 3 view .LVU184
 703 000e 3146     		mov	r1, r6
 704 0010 FFF7FEFF 		bl	cvector_val_at
 705              	.LVL56:
 706              		.loc 1 141 33 discriminator 3 view .LVU185
 707 0014 0768     		ldr	r7, [r0]
 708              	.LVL57:
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 16


 142:Core/BSP/interface/bsp_can.c ****                 funcnow(i, rxconf.StdId, bsp_can_rxbuf, rxconf.DLC);
 709              		.loc 1 142 17 is_stmt 1 discriminator 3 view .LVU186
 710 0016 079B     		ldr	r3, [sp, #28]
 711 0018 01AA     		add	r2, sp, #4
 712 001a 0399     		ldr	r1, [sp, #12]
 713 001c E0B2     		uxtb	r0, r4
 714 001e B847     		blx	r7
 715              	.LVL58:
 716              	.LBE14:
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 717              		.loc 1 140 71 discriminator 3 view .LVU187
 718 0020 0136     		adds	r6, r6, #1
 719              	.LVL59:
 720              	.L58:
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 721              		.loc 1 140 32 discriminator 1 view .LVU188
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 722              		.loc 1 140 50 is_stmt 0 discriminator 1 view .LVU189
 723 0022 0D4B     		ldr	r3, .L63
 724 0024 03EBC413 		add	r3, r3, r4, lsl #7
 725 0028 9868     		ldr	r0, [r3, #8]
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 726              		.loc 1 140 61 discriminator 1 view .LVU190
 727 002a 4368     		ldr	r3, [r0, #4]	@ unaligned
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 728              		.loc 1 140 13 discriminator 1 view .LVU191
 729 002c B342     		cmp	r3, r6
 730 002e EED8     		bhi	.L59
 731              	.LVL60:
 732              	.L57:
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 733              		.loc 1 140 13 discriminator 1 view .LVU192
 734              	.LBE13:
 735              	.LBE12:
 135:Core/BSP/interface/bsp_can.c ****         if (hcan == can_devices[i].device) {
 736              		.loc 1 135 41 is_stmt 1 discriminator 2 view .LVU193
 737 0030 0134     		adds	r4, r4, #1
 738              	.LVL61:
 739              	.L56:
 135:Core/BSP/interface/bsp_can.c ****         if (hcan == can_devices[i].device) {
 740              		.loc 1 135 21 discriminator 1 view .LVU194
 135:Core/BSP/interface/bsp_can.c ****         if (hcan == can_devices[i].device) {
 741              		.loc 1 135 5 is_stmt 0 discriminator 1 view .LVU195
 742 0032 012C     		cmp	r4, #1
 743 0034 0CDC     		bgt	.L62
 136:Core/BSP/interface/bsp_can.c ****             uint8_t bsp_can_rxbuf[8];
 744              		.loc 1 136 9 is_stmt 1 view .LVU196
 136:Core/BSP/interface/bsp_can.c ****             uint8_t bsp_can_rxbuf[8];
 745              		.loc 1 136 35 is_stmt 0 view .LVU197
 746 0036 E301     		lsls	r3, r4, #7
 747 0038 074A     		ldr	r2, .L63
 748 003a D358     		ldr	r3, [r2, r3]
 136:Core/BSP/interface/bsp_can.c ****             uint8_t bsp_can_rxbuf[8];
 749              		.loc 1 136 12 view .LVU198
 750 003c AB42     		cmp	r3, r5
 751 003e F7D1     		bne	.L57
 752              	.LBB16:
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 17


 137:Core/BSP/interface/bsp_can.c ****             CAN_RxHeaderTypeDef rxconf;
 753              		.loc 1 137 13 is_stmt 1 view .LVU199
 138:Core/BSP/interface/bsp_can.c ****             HAL_CAN_GetRxMessage(hcan, fifo, &rxconf, bsp_can_rxbuf);
 754              		.loc 1 138 13 view .LVU200
 139:Core/BSP/interface/bsp_can.c ****             for (size_t j = 0; j < can_devices[i].call_backs->cv_len; ++j) {
 755              		.loc 1 139 13 view .LVU201
 756 0040 01AB     		add	r3, sp, #4
 757 0042 03AA     		add	r2, sp, #12
 758 0044 4146     		mov	r1, r8
 759 0046 2846     		mov	r0, r5
 760 0048 FFF7FEFF 		bl	HAL_CAN_GetRxMessage
 761              	.LVL62:
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 762              		.loc 1 140 13 view .LVU202
 763              	.LBB15:
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 764              		.loc 1 140 18 view .LVU203
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 765              		.loc 1 140 25 is_stmt 0 view .LVU204
 766 004c 0026     		movs	r6, #0
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 767              		.loc 1 140 13 view .LVU205
 768 004e E8E7     		b	.L58
 769              	.LVL63:
 770              	.L62:
 140:Core/BSP/interface/bsp_can.c ****                 can_rx_callback funcnow = *(can_rx_callback *)cvector_val_at(can_devices[i].call_ba
 771              		.loc 1 140 13 view .LVU206
 772              	.LBE15:
 773              	.LBE16:
 774              	.LBE11:
 143:Core/BSP/interface/bsp_can.c ****             }
 144:Core/BSP/interface/bsp_can.c ****         }
 145:Core/BSP/interface/bsp_can.c ****     }
 146:Core/BSP/interface/bsp_can.c **** }
 775              		.loc 1 146 1 view .LVU207
 776 0050 0AB0     		add	sp, sp, #40
 777              	.LCFI16:
 778              		.cfi_def_cfa_offset 24
 779              		@ sp needed
 780 0052 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 781              	.LVL64:
 782              	.L64:
 783              		.loc 1 146 1 view .LVU208
 784 0056 00BF     		.align	2
 785              	.L63:
 786 0058 00000000 		.word	.LANCHOR0
 787              		.cfi_endproc
 788              	.LFE139:
 790              		.section	.text.HAL_CAN_RxFifo0MsgPendingCallback,"ax",%progbits
 791              		.align	1
 792              		.global	HAL_CAN_RxFifo0MsgPendingCallback
 793              		.syntax unified
 794              		.thumb
 795              		.thumb_func
 797              	HAL_CAN_RxFifo0MsgPendingCallback:
 798              	.LVL65:
 799              	.LFB140:
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 18


 147:Core/BSP/interface/bsp_can.c **** 
 148:Core/BSP/interface/bsp_can.c **** void HAL_CAN_RxFifo0MsgPendingCallback(CAN_HandleTypeDef *hcan) {
 800              		.loc 1 148 65 is_stmt 1 view -0
 801              		.cfi_startproc
 802              		@ args = 0, pretend = 0, frame = 0
 803              		@ frame_needed = 0, uses_anonymous_args = 0
 804              		.loc 1 148 65 is_stmt 0 view .LVU210
 805 0000 08B5     		push	{r3, lr}
 806              	.LCFI17:
 807              		.cfi_def_cfa_offset 8
 808              		.cfi_offset 3, -8
 809              		.cfi_offset 14, -4
 149:Core/BSP/interface/bsp_can.c ****     BSP_CAN_FifoMsg_Callback(hcan, CAN_RX_FIFO0);
 810              		.loc 1 149 5 is_stmt 1 view .LVU211
 811 0002 0021     		movs	r1, #0
 812 0004 FFF7FEFF 		bl	BSP_CAN_FifoMsg_Callback
 813              	.LVL66:
 150:Core/BSP/interface/bsp_can.c **** }
 814              		.loc 1 150 1 is_stmt 0 view .LVU212
 815 0008 08BD     		pop	{r3, pc}
 816              		.cfi_endproc
 817              	.LFE140:
 819              		.section	.text.HAL_CAN_RxFifo1MsgPendingCallback,"ax",%progbits
 820              		.align	1
 821              		.global	HAL_CAN_RxFifo1MsgPendingCallback
 822              		.syntax unified
 823              		.thumb
 824              		.thumb_func
 826              	HAL_CAN_RxFifo1MsgPendingCallback:
 827              	.LVL67:
 828              	.LFB141:
 151:Core/BSP/interface/bsp_can.c **** 
 152:Core/BSP/interface/bsp_can.c **** void HAL_CAN_RxFifo1MsgPendingCallback(CAN_HandleTypeDef *hcan) {
 829              		.loc 1 152 65 is_stmt 1 view -0
 830              		.cfi_startproc
 831              		@ args = 0, pretend = 0, frame = 0
 832              		@ frame_needed = 0, uses_anonymous_args = 0
 833              		.loc 1 152 65 is_stmt 0 view .LVU214
 834 0000 08B5     		push	{r3, lr}
 835              	.LCFI18:
 836              		.cfi_def_cfa_offset 8
 837              		.cfi_offset 3, -8
 838              		.cfi_offset 14, -4
 153:Core/BSP/interface/bsp_can.c ****     BSP_CAN_FifoMsg_Callback(hcan, CAN_RX_FIFO1);
 839              		.loc 1 153 5 is_stmt 1 view .LVU215
 840 0002 0121     		movs	r1, #1
 841 0004 FFF7FEFF 		bl	BSP_CAN_FifoMsg_Callback
 842              	.LVL68:
 154:Core/BSP/interface/bsp_can.c **** }...
 843              		.loc 1 154 1 is_stmt 0 view .LVU216
 844 0008 08BD     		pop	{r3, pc}
 845              		.cfi_endproc
 846              	.LFE141:
 848              		.global	can_devices
 849              		.section	.bss.can_devices,"aw",%nobits
 850              		.align	2
 851              		.set	.LANCHOR0,. + 0
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 19


 854              	can_devices:
 855 0000 00000000 		.space	256
 855      00000000 
 855      00000000 
 855      00000000 
 855      00000000 
 856              		.text
 857              	.Letext0:
 858              		.file 2 "d:\\gcc-arm-none-eabi\\arm-none-eabi\\include\\machine\\_default_types.h"
 859              		.file 3 "d:\\gcc-arm-none-eabi\\arm-none-eabi\\include\\sys\\_stdint.h"
 860              		.file 4 "Core/BSP/interface/bsp_can.h"
 861              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 862              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 863              		.file 7 "d:\\gcc-arm-none-eabi\\lib\\gcc\\arm-none-eabi\\10.3.1\\include\\stddef.h"
 864              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_can.h"
 865              		.file 9 "Core/Inc/can.h"
 866              		.file 10 "Core/HAL/lib/cvector.h"
 867              		.file 11 "Core/BSP/interface/bsp_time.h"
ARM GAS  C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s 			page 20


DEFINED SYMBOLS
                            *ABS*:00000000 bsp_can.c
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:20     .text.BSP_CAN_Init:00000000 $t
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:26     .text.BSP_CAN_Init:00000000 BSP_CAN_Init
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:151    .text.BSP_CAN_Init:00000078 $d
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:158    .text.BSP_CAN_Send:00000000 $t
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:164    .text.BSP_CAN_Send:00000000 BSP_CAN_Send
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:272    .text.BSP_CAN_Send:00000054 $d
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:277    .text.update_filter:00000000 $t
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:283    .text.update_filter:00000000 update_filter
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:449    .text.update_filter:00000088 $d
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:454    .text.BSP_CAN_AddFilter:00000000 $t
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:460    .text.BSP_CAN_AddFilter:00000000 BSP_CAN_AddFilter
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:532    .text.BSP_CAN_AddFilter:00000038 $d
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:537    .text.BSP_CAN_RemoveFilter:00000000 $t
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:543    .text.BSP_CAN_RemoveFilter:00000000 BSP_CAN_RemoveFilter
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:608    .text.BSP_CAN_RemoveFilter:0000003c $d
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:613    .text.BSP_CAN_RegisterRxCallback:00000000 $t
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:619    .text.BSP_CAN_RegisterRxCallback:00000000 BSP_CAN_RegisterRxCallback
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:655    .text.BSP_CAN_RegisterRxCallback:0000001c $d
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:660    .text.BSP_CAN_FifoMsg_Callback:00000000 $t
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:666    .text.BSP_CAN_FifoMsg_Callback:00000000 BSP_CAN_FifoMsg_Callback
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:786    .text.BSP_CAN_FifoMsg_Callback:00000058 $d
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:791    .text.HAL_CAN_RxFifo0MsgPendingCallback:00000000 $t
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:797    .text.HAL_CAN_RxFifo0MsgPendingCallback:00000000 HAL_CAN_RxFifo0MsgPendingCallback
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:820    .text.HAL_CAN_RxFifo1MsgPendingCallback:00000000 $t
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:826    .text.HAL_CAN_RxFifo1MsgPendingCallback:00000000 HAL_CAN_RxFifo1MsgPendingCallback
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:854    .bss.can_devices:00000000 can_devices
C:\Users\lenovo\AppData\Local\Temp\ccdBrAAz.s:850    .bss.can_devices:00000000 $d

UNDEFINED SYMBOLS
cvector_create
HAL_CAN_Start
HAL_CAN_ActivateNotification
hcan1
hcan2
BSP_sys_time_ms
HAL_CAN_GetTxMailboxesFreeLevel
HAL_CAN_AbortTxRequest
HAL_CAN_AddTxMessage
HAL_CAN_ConfigFilter
cvector_pushback
cvector_val_at
HAL_CAN_GetRxMessage
